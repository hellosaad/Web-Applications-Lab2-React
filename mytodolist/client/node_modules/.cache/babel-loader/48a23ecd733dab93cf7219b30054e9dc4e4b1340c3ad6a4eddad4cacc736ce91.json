{"ast":null,"code":"var _jsxFileName = \"/Users/saadmohammedkhaled/Desktop/Web_Applications/lab2/Web-Applications-Lab2-React/mytodolist/client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useReducer, useEffect } from \"react\";\nimport { StateContext } from \"./contexts\";\nimport appReducer from \"./reducers\";\nimport { useResource } from \"react-request-hook\";\nimport CreateTodo from \"./CreateTodo\";\nimport UserBar from \"./UserBar\";\nimport TodoList from \"./TodoList\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [state, dispatch] = useReducer(appReducer, {\n    user: \"\",\n    todos: []\n  });\n  const [todosResult, getTodos] = useResource(() => ({\n    url: \"/todo\",\n    method: \"get\",\n    headers: {\n      Authorization: `${state.user.access_token}`\n    }\n  }));\n  useEffect(() => {\n    if (state.user) {\n      getTodos();\n    }\n  }, [getTodos, state.user]);\n  useEffect(() => {\n    if (todosResult && todosResult.data) {\n      dispatch({\n        type: \"FETCH_TODOS\",\n        todos: todosResult.data.todos\n      });\n    }\n  }, [todosResult, dispatch]);\n  return /*#__PURE__*/_jsxDEV(StateContext.Provider, {\n    value: {\n      state,\n      dispatch\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(UserBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), state.user && /*#__PURE__*/_jsxDEV(CreateTodo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 24\n      }, this), /*#__PURE__*/_jsxDEV(TodoList, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"EahEqJ42rQHkWaCo9pt+qM0sY0k=\", false, function () {\n  return [useResource];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useReducer","useEffect","StateContext","appReducer","useResource","CreateTodo","UserBar","TodoList","jsxDEV","_jsxDEV","App","_s","state","dispatch","user","todos","todosResult","getTodos","url","method","headers","Authorization","access_token","data","type","Provider","value","children","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/saadmohammedkhaled/Desktop/Web_Applications/lab2/Web-Applications-Lab2-React/mytodolist/client/src/App.js"],"sourcesContent":["import React, { useReducer, useEffect } from \"react\";\nimport { StateContext } from \"./contexts\";\nimport appReducer from \"./reducers\";\nimport { useResource } from \"react-request-hook\";\nimport CreateTodo from \"./CreateTodo\";\nimport UserBar from \"./UserBar\";\nimport TodoList from \"./TodoList\";\nimport \"./App.css\";\n\nfunction App() {\n  const [state, dispatch] = useReducer(appReducer, { user: \"\", todos: [] });\n\n  const [todosResult, getTodos] = useResource(() => ({\n    url: \"/todo\",\n    method: \"get\",\n    headers: {\n      Authorization: `${state.user.access_token}`,\n    },\n  }));\n\n  useEffect(() => {\n    if (state.user) {\n      getTodos();\n    }\n  }, [getTodos, state.user]);\n\n  useEffect(() => {\n    if (todosResult && todosResult.data) {\n      dispatch({ type: \"FETCH_TODOS\", todos: todosResult.data.todos });\n    }\n  }, [todosResult, dispatch]);\n\n  return (\n    <StateContext.Provider value={{ state, dispatch }}>\n      <div className=\"App\">\n        <UserBar />\n        {state.user && <CreateTodo />}\n        <TodoList />\n      </div>\n    </StateContext.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AACpD,SAASC,YAAY,QAAQ,YAAY;AACzC,OAAOC,UAAU,MAAM,YAAY;AACnC,SAASC,WAAW,QAAQ,oBAAoB;AAChD,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAO,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnB,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGb,UAAU,CAACG,UAAU,EAAE;IAAEW,IAAI,EAAE,EAAE;IAAEC,KAAK,EAAE;EAAG,CAAC,CAAC;EAEzE,MAAM,CAACC,WAAW,EAAEC,QAAQ,CAAC,GAAGb,WAAW,CAAC,OAAO;IACjDc,GAAG,EAAE,OAAO;IACZC,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MACPC,aAAa,EAAG,GAAET,KAAK,CAACE,IAAI,CAACQ,YAAa;IAC5C;EACF,CAAC,CAAC,CAAC;EAEHrB,SAAS,CAAC,MAAM;IACd,IAAIW,KAAK,CAACE,IAAI,EAAE;MACdG,QAAQ,CAAC,CAAC;IACZ;EACF,CAAC,EAAE,CAACA,QAAQ,EAAEL,KAAK,CAACE,IAAI,CAAC,CAAC;EAE1Bb,SAAS,CAAC,MAAM;IACd,IAAIe,WAAW,IAAIA,WAAW,CAACO,IAAI,EAAE;MACnCV,QAAQ,CAAC;QAAEW,IAAI,EAAE,aAAa;QAAET,KAAK,EAAEC,WAAW,CAACO,IAAI,CAACR;MAAM,CAAC,CAAC;IAClE;EACF,CAAC,EAAE,CAACC,WAAW,EAAEH,QAAQ,CAAC,CAAC;EAE3B,oBACEJ,OAAA,CAACP,YAAY,CAACuB,QAAQ;IAACC,KAAK,EAAE;MAAEd,KAAK;MAAEC;IAAS,CAAE;IAAAc,QAAA,eAChDlB,OAAA;MAAKmB,SAAS,EAAC,KAAK;MAAAD,QAAA,gBAClBlB,OAAA,CAACH,OAAO;QAAAuB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EACVpB,KAAK,CAACE,IAAI,iBAAIL,OAAA,CAACJ,UAAU;QAAAwB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC7BvB,OAAA,CAACF,QAAQ;QAAAsB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACT;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACe,CAAC;AAE5B;AAACrB,EAAA,CAhCQD,GAAG;EAAA,QAGsBN,WAAW;AAAA;AAAA6B,EAAA,GAHpCvB,GAAG;AAkCZ,eAAeA,GAAG;AAAC,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}